
<html>
	<head>
		<title>Stellar'ISEN - planets</title>
		<link rel="stylesheet" type="text/css" href="css/style.css">
		<script src="js/three.js"></script>
	</head>
	<body>
		<div id="loader-wrapper">
			<img id="loader" src="res/images/planet.png" alt="">
		</div>		
		
		<script>
			var deviceIsMobile = (typeof window.orientation !== "undefined") || (navigator.userAgent.indexOf('IEMobile') !== -1);
			var scene = new THREE.Scene();
			let camera = null;
			if (deviceIsMobile && (window.orientation != 90 && window.orientation != -90)) {
				let ratio = window.innerWidth / window.innerHeight;
				camera = new THREE.OrthographicCamera( -16.285714285714285 * ratio, 16.285714285714285 * ratio, 16.285714285714285, -16.285714285714285, - 500, 1000); 
				camera.rotation.z = -Math.PI / 2;
			}	
			else {
				let ratio = window.innerHeight / window.innerWidth;
				console.log(window.innerWidth / 70);
				console.log(window.innerHeight / 70);
				camera = new THREE.OrthographicCamera( -16.285714285714285, 16.285714285714285, 16.285714285714285 * ratio, -16.285714285714285 * ratio, - 500, 1000); 
			}	
			var renderer = new THREE.WebGLRenderer({ antialias: true });
			
			// On met en place le renderer
			renderer.setPixelRatio(window.devicePixelRatio);
			renderer.setSize(window.innerWidth, window.innerHeight);
			document.body.appendChild(renderer.domElement);
			
			planets = [];
			
			textures =
				[	"res/images/planets/sun.png"
				,	"res/images/planets/mercury.png"
				,	"res/images/planets/venus.png"
				,	"res/images/planets/earth.png"
				,	"res/images/planets/mars.png"
				,	"res/images/planets/jupiter.png"
				,	"res/images/planets/saturn.png"
				,	"res/images/planets/uranus.png"
				,	"res/images/planets/neptune.png"
				,	"res/images/planets/pluto.png"
				]
			
			distances = 
				[	-24
				,	-13
				,	-9
				,	-6.7
				,	-4.7
				,	1.5
				,	5.5
				,	9
				,	12
				,	14
				]
				
			radius =
				[	10
				,	0.38555
				,	0.95623
				,	1.00672
				,	0.5357
				,	1.6
				,	1.4
				,	1.1
				,	1.1
				,	0.18744
				]
				
			tilts = 
				[	-0.1265364	// Soleil
				,	-0.0005235988	// Mercure
				,	-0.04607669	// Venus
				,	-0.408407	// Terre
				,	-0.43964844	// Mars
				,	-0.05462881 // Jupiter
				,	-0.4660029	// Saturne
				,	-1.4351842	// Uranus
				,	-0.49427724	// Neptune
				,	-1.0030407	// Pluto
				]
				
			let textureLoader = new THREE.TextureLoader();
			for (let index = 0; index < textures.length; index++) {
				textureLoader.load
					(	textures[index]
					,	function(texture) 
						{	let skyGeo = new THREE.SphereGeometry(radius[index], 50, 50);
							let material = new THREE.MeshBasicMaterial(
								{	transparent: true
								,	color: '#ffffff'
								,	map: texture
								});
							let sky = new THREE.Mesh(skyGeo, material);
							sky.position.z = -10;
							sky.position.x = distances[index];
							sky.rotateZ(tilts[index]);
							scene.add(sky);
							planets.push(sky);							
						}
					)
			}
			
			textureLoader.load
				(	"res/images/planets/saturn_rings.png"
				,	function(texture) 
					{	let geometry = new THREE.RingGeometry(2.2, 3.2, 25);
						let material = new THREE.MeshBasicMaterial(
							{	color: '#E1C9A2'
							,	side: THREE.DoubleSide
							//,	map: texture
							});
							
						let sky = new THREE.Mesh(geometry, material);
						sky.position.z = -10;
						sky.position.x = 5.5;
						sky.rotation.y = Math.PI * 1.45;
						sky.rotateOnWorldAxis(new THREE.Vector3(0, 0, 1), 0.4660029 * 2.33);
						scene.add(sky);							
					}
				)
				
			/* Activation de l'animation de fade-out du loading */
			const loadingScreen = document.getElementById( 'loader-wrapper' );
			loadingScreen.classList.add( 'fade-out' );

			var update = () => { 
				requestAnimationFrame(update);
				for (let i = 0; i < planets.length; i++) {
					planets[i].rotateY(0.01);
				}
				renderer.render(scene, camera);
			};
			update();
		</script>
	</body>
</html>
